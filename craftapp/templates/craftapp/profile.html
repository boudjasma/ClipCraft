{% extends 'craftapp/base.html' %}
{% load i18n %}
{% load static %}

{% block styles %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block scripts %}
{{ block.super }}
<script src="{% static 'js/profile_picture.js' %}" defer></script>
{% endblock %}


{% block header %}<a href="{% url 'home' %}" class="link-light text-decoration-none">ClipCraft</a>{% endblock %}

{% block login %}
    {% if user.is_authenticated %}
    <a class="text-light" href="{% url 'profile' %}">    
        <img src="{{ request.user.profile.picture.url }}" class="rounded-circle float-start img-fluid mx-sm-2" height="50" width="30">
    </a>
    <a class="text-light" href="{% url 'logout' %}">{% trans "Logout" %}</a>
    {% endif %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-6 mt-sm-4">
            <div class="d-sm-flex flex-row bd-highlight mb-sm-3">
                <div class="bd-highlight">
                    <img src="{{ request.user.profile.picture.url }}" class="rounded-circle float-start img-fluid" height="100" width="100"  data-bs-toggle="modal" data-bs-target="#exampleModal2">
                </div>
                
                <div class="mx-2 bd-highlight">
                    <div class="fs-2">{{ request.user.first_name }} {{ user.last_name }}</div>
                    <div class="fs-5 text-uppercase">{{ request.user.username }}</div>
                </div>
            </div>
        </div>
        <div class="col-sm-6 mt-sm-4">
            <div class="card mb-sm-4">
                <div class="d-flex justify-content-between">
                    <div class="card-title p-2">{% trans "Description" %} :</div>
                    <div class="p-2" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi bi-pencil-square"></i></div>
                </div>
                
                <div class="card-body p-sm-2"><p class="mx-1">{{ request.user.profile.description }}</p></div>
            </div>
        </div>
    </div>

  </div>

    
{% endblock %}

{% block modal_body %}
    <form method="post">
        {% csrf_token %}
        <input name="description">
        <button type="submit" class="btn w-sm-50 text-light" style="background-color: #111345;">{% trans "Create" %}</button>
    </form>

{% endblock %}

{% block modal_additionnal_body %}
<form enctype='multipart/form-data' method='POST' class="dropzone dz" id="dropzone" >
    {% csrf_token %}
    <div class="fallback">
        <input name="file" type="file"/>
    </div>
    <button type="submit" class="btn w-sm-50 text-light" style="background-color: #111345;">{% trans "Confirm" %}</button>
</form>

{% endblock %}